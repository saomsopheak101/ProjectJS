<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit profile</title>
    <link rel="shortcut icon" type="image/png" href="../images/img-pet/logo/favicon.png">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../icons/fontawesome/css/all.min.css">
</head>

<body class="profile-page">

    <!--*******************
        Preloader start
    ********************-->
	<div id="preloader">
		<div class="lds-ripple">
			<div></div>
			<div></div>
		</div>
	</div>
	<!--*******************
        Preloader end
    ********************-->

    <header class="">
        <nav class="navbar navbar-expand-lg  z-3">
            <div class="container px-5 py-3  px-md-0">
                <a class="navbar-brand" href="">
                    <img src="../images/img-pet/logo/PetZone (2).png" style="width: 80px;" alt="">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav justify-content-center flex-grow-1 pe-0" style="z-index: 99;">
                        <li class="nav-item ">
                            <a class="nav-link fw-medium" href="index.html">Home</a>
                        </li>
                        <li class="nav-item mx-lg-2 dropdown">
                            <a class="nav-link dropdown-toggle  black-nav fw-medium pe-0" href="pages/service-main.html" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Service
                            </a>
                            <ul class="dropdown-menu  dropdown-services">
                                <li><a class="dropdown-item text-black fw-medium " href="../pages/service-main.html">Service main</a>
                                </li>
                                <li><a class="dropdown-item text-black fw-medium" href="../pages/petDayCare.html">Pet Day care</a>
                                </li>
                                <li><a class="dropdown-item text-black fw-medium" href="../pages/petGrooming.html">Pet
                                        Grooming</a>
                                </li>
                                <li><a class="dropdown-item text-black fw-medium" href="../pages/petTraining.html">Pet
                                        Training</a>
                                </li>
                                <li><a class="dropdown-item text-black fw-medium" href="../pages/petConsult.html">Pet
                                        Consulting</a>
                                </li>
                                <li><a class="dropdown-item text-black fw-medium" href="../pages/petVeterinary.html">Pet
                                        Veterinary</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item mx-lg-2 dropdown ">
                            <a class="nav-link  fw-medium black-nav" href="../pages/about-us.html" role="button"
                                aria-expanded="false">
                                About us
                            </a>
                        </li>
                        <li class="nav-item mx-lg-2">
                            <a class="nav-link fw-medium black-nav" href="../pages/feedback.html">Feedback</a>
                        </li>
                        <li class="nav-item mx-lg-2">
                            <a class="nav-link fw-medium black-nav" href="../pages/contact.html">Contact</a>
                        </li>
                    </ul>
                    <div class="d-flex align-items-center ">
                  
                        <!-- User profile -->
                        <div class="dropdown-center dropdown-account" id="profiles">
                            <div class="d-flex">
                                <form class="d-flex position-relative" role="search">
                                    <div class="search-container position-relative">
                                        <input class="form-control bg-white text-black position-relative" type="search"
                                            placeholder="Search" aria-label="Search" id="searchInput">
                                        <i class="fa-solid fa-search position-absolute bg-white"
                                            style="top: 10px; right: 12px;"></i>
                                        <ul id="searchResults" class="list-group position-absolute mt-1"
                                            style="display: none; z-index: 1000; width: 100%;">
                                            <!-- Search results will be appended here -->
                                        </ul>
                                    </div>
                                </form>
                                <a class="btn btn-icon d-flex py-0 position-relative" role="button" href=""
                                    title="profile" data-bs-toggle="dropdown" aria-expanded="false">

                                    <div class="hp-user p-0 m-0 rounded-circle overflow-hidden">
                                        <img class="mb-2 changeImg" src="../images/img-pet/icon/user.png">
                                    </div>
                                    <span
                                        class="badge ms-auto rounded-pill fw-normal position-absolute end-0 top-0 fs-7 p-1 px-2 badge-noti">
                                        <small></small>
                                    </span>
                                </a>
                                <ul class="dropdown-menu mt-4 rounded-3 profile-management overflow-hidden"
                                    style="width: 270px; transform: translateX(30px); transition: 0.3s;">
                                    <div class="bg-warning-subtle btn-shadow"
                                        style="width: 100%; height: 150px;position: absolute;z-index: 1;transform: translateY(-100px); ">
                                    </div>
                                    <div class="border-0 pb-3 position-relative ">
                                        <div class="account-header d-flex flex-column align-items-center  pt-2">
                                            <div class=" z-2 mb-2 ph-user2 overflow-hidden rounded-circle">
                                                <img class="changeImg" src="../images/img-pet/icon/user.png" alt="#">
                                            </div>
                                            <div
                                                class="d-flex flex-column align-items-center justify-content-center text-whitee">
                                                <h5 class="mb-0 firstname">NIKI</h5>
                                                <p class="Gemail">niki@gmail.com</p>
                                            </div>
                                        </div>
                                        <ul class="nav">
                                            <li class="nav-item border-0  w-100">
                                                <a href="../pages/profile.html" class="nav-link d-flex fw-medium px-4"
                                                    aria-current="page">
                                                    <div class="px-2">
                                                        <img src="../images/service/setting-profile.png" alt=""
                                                            width="20">
                                                    </div>
                                                    My Profile
                                                </a>
                                            </li>


                                            <li class="nav-item border-0  w-100">
                                                <a href="../pages/profile-grooming.html"
                                                    class="nav-link d-flex fw-medium px-4">

                                                    <div class="px-2">
                                                        <img src="../images/service/grooming-setting (2).png" alt=""
                                                            width="25">
                                                    </div>

                                                    Grooming
                                                </a>
                                            </li>
                                            <li class="nav-item border-0  w-100">
                                                <a href="../pages/profile-daycare.html"
                                                    class="nav-link active d-flex fw-medium px-4">

                                                    <div class="px-2">
                                                        <img src="../images/service/daycare-setting.png" alt=""
                                                            width="25">
                                                    </div>

                                                    Day care
                                                </a>
                                            </li>
                                            <li class="nav-item border-0  w-100">
                                                <a href="../pages/profile-consulting.html"
                                                    class="nav-link  d-flex fw-medium px-4">

                                                    <div class="px-2">
                                                        <img src="../images/service/consult-setting.png" alt=""
                                                            width="24">
                                                    </div>

                                                    Consulting
                                                </a>
                                            </li>
                                            <li class="nav-item border-0 w-100">
                                                <a href="../pages/profile.feedback.html"
                                                    class="nav-link d-flex fw-medium px-4">

                                                    <div class="px-2">
                                                        <img src="../images/service/feedback-setting.png" alt=""
                                                            width="24">
                                                    </div>



                                                    Feedback
                                                </a>
                                            </li>
                                            <li class="nav-item border-0  w-100">
                                                <a href="../pages/profile-notification.html"
                                                    class="nav-link d-flex fw-medium px-4">
                                                    <div class="px-2">
                                                        <img src="../images/service/notification-svgrepo-com.svg" alt=""
                                                            width="20">
                                                    </div>
                                                    Notification
                                                </a>
                                            </li>
                                            <li class="nav-item border-0  w-100">
                                                <button
                                                    class="dropdown-item text-white-light px-4  d-flex py-2 align-items-center mb-0"
                                                    aria-current="page" id="logout">
                                                    <div class="px-3">
                                                        <img src="../images/service/log-out.png" alt="" width="20">
                                                    </div>
                                                    Log out
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </nav>
    </header>
    <main>
        <section class="bg-profile position-relative margin-bottom ">
            <div class="banner-profile booking-service"></div>
            <div class="content d-flex align-items-center">
                
            </div>
        </section>
        <section class="profile-book mt-profile margin-bottom">
            <div class="container">
                <div class="row ">
                    <div class="col-10 d-flex m-auto">
                        <div class="setting-sidebar col-md-4 col-xl-4 me-4">
                            <div class="card border-0 shadow py-4 ">
                                <div class="card-header bg-transparent mb-3">
                                    <a href="#" class="img-pro">
                                        <img src="../images/img-pet/icon/user.png" alt="" class="changeImg">
                                        <div class="icon-delete "  onclick="deleteAvatar()" style="cursor: pointer;">
                                            <i class="fa-solid fa-trash-can fs-4 text-white"></i>
                                        </div>
                                    </a>
                                    <label type="button" for="profile"
                                        class="btn btn-edit-1 color-bg btn-camera position-absolute">
                                        <i class="fa-solid fa-camera text-white" ></i>
                                    </label>
                                    <input type="file" class="form-control bg-transparent d-none" id="profile"
                                        accept="image/*">
                                   
                                    <!-- <button type="button" class="btn btn-primary">Delete</button> -->
                                    <h5 class="mb-0 mt-4 firstname">Kinki</h5>
                                    <span class="Gemail">Kinki@gmail.com</span>
                                </div>
                                <ul class="nav">
                                    <li class="nav-item border-0">
                                        <a href="../pages/profile.html" class="nav-link active d-flex fw-medium px-4"
                                            aria-current="page">
                                            <div>
                                                <img src="../images/service/setting-profile.png" alt="" width="20">
                                            </div>
                                            My Profile
                                        </a>
                                    </li>
                                    <li class="nav-item border-0">
                                        <a href="../pages/profile-grooming.html"
                                            class="nav-link d-flex fw-medium px-4">
                                            <div>
                                                <div>
                                                    <img src="../images/service/grooming-setting (2).png" alt="" width="25">
                                                </div>
                                            </div>
                                            Grooming
                                        </a>
                                    </li>
                                    <li class="nav-item border-0">
                                        <a href="../pages/profile-daycare.html"
                                            class="nav-link d-flex fw-medium px-4">
                                            <div>
                                                <div>
                                                    <img src="../images/service/daycare-setting.png" alt="" width="25">
                                                </div>
                                            </div>
                                            Day care
                                        </a>
                                    </li>
                                    <li class="nav-item border-0">
                                        <a href="../pages/profile-consulting.html" class="nav-link  d-flex fw-medium px-4">
                                            <div>
                                                <div>
                                                    <img src="../images/service/consult-setting.png" alt="" width="24">
                                                </div>
                                            </div>
                                            Consulting
                                        </a>
                                    </li>
                                    <li class="nav-item border-0">
                                        <a href="../pages/profile.feedback.html" class="nav-link d-flex fw-medium px-4">
                                            <div>
                                                <div>
                                                    <img src="../images/service/feedback-setting.png" alt="" width="24">
                                                </div>
                                            </div>
                                            Feedback
                                        </a>
                                    </li>
                                    <li class="nav-item border-0">
                                        <a href="../pages/profile-notification.html" class="nav-link d-flex fw-medium px-4">
                                            <div>
                                                <div>
                                                    <img src="../images/service/notification-svgrepo-com.svg" alt="" width="20">
                                                </div>
                                            </div>
                                            Notification
                                        </a>
                                    </li>
                                    <li class="nav-item border-0">
                                        <a role="button" class="nav-link d-flex fw-medium px-4 logout">
                                            <div>
                                                <img src="../images/service/log-out.png" alt="" width="20">
                                            </div>
                                            Log Out
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-xl-8 col-lg-9 col-md-12 col-sm-12 col-12">
                            <div class="card shadow border-0">
                                <div class="col-xl-12  rounded-2 col-lg-12 px-0 col-md-12 color-bg col-sm-12 col-12">
                                    <h4 class="mb-0 p-3 text-white fw-bold">Edit information</h4>
                                </div>
                                <div class="card-body">
                                    <div class="row gutters p-4">
                                        <div class="row mb-4">
                                            <label for="inputEmail" class="col-sm-3 col-form-label text-black">First
                                                name</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control bg-transparent" id="fname" value="">
                                            </div>
                                        </div>
                                        <div class="row mb-4">
                                            <label for="inputEmail" class="col-sm-3 col-form-label text-black">Last
                                                name</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control bg-transparent" id="lname" value="">
                                            </div>
                                        </div>
    
                                        <div class="row mb-4">
                                            <label for="inputEmail" class="col-sm-3 col-form-label text-black">Email
                                                Address</label>
                                            <div class="col-sm-9">
                                                <input type="email" class="form-control bg-transparent" id="Memail"
                                                    value="">
                                            </div>
                                        </div>
                                        <div class="row mb-4">
                                            <label for="inputEmail" class="col-sm-3 col-form-label text-black">Phone</label>
                                            <div class="col-sm-9">
                                                <input type="tel" class="form-control bg-transparent" id="pnumber" value="">
                                            </div>
                                        </div>
    
                                        <div class="row mb-4">
                                            <label for="inputEmail"
                                                class="col-sm-3 col-form-label text-black">Address</label>
                                            <div class="col-sm-9">
                                                <input type="tel" class="form-control bg-transparent" id="address" value="">
                                            </div>
                                        </div>
                                        <div class="row gutters">
                                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                                
                                                <div class="text-right d-flex">
                                                    <a href="../pages/profile-chang-password.html">
                                                        <div class="mt-4 me-5">
                                                            <button type="button" id="submit" name="submit" class="btn btn-warning ">Change password</button>
                                                        </div>
                                                    </a>
                                                    
                                                    <div class="row gutters ms-5 ps-5 mt-4">
                                                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 ps-5 ms-5">
                                                            <div class="text-right">
                                                                <button type="button" id="submit" name="submit"
                                                                    class="btn btn-secondary px-4 py-2">Cancel</button>
                                                                <button id="btn-save" name="submit"
                                                                    class="btn btn-edit color-bg px-4 py-2 text-white">Save</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
        </section>
    </main>

    <footer class="">
        <div class="container">
            <section class="top-footer py-5 ">
                <div class="container-fluid px-0 mx-0">
                    <div class="row text-white justify-content-center">
                        <div class="col-3 col-md-12 col-xl-3 ">
                            <div class="content-left">
                                <div class="logo-lg-img">
                                    <img class=" object-fit-cover pb-4" src="../images/img-pet/logo/PetZone (2).png"
                                        alt="">
                                </div>
                                <div class="foot-icon">
                                    <div class="d-flex">
                                        <i class="fa-solid fa-phone fs-2 color-text mt-2"></i>
                                        <div class="text ps-4">
                                            <p> +855 0123 456 789 <br> Got Questions? Call us 24/7</p>
                                        </div>
                                    </div>
                                    <div>
                                        <h5> Our Address</h5>
                                        <p> 92 Bowery St., New York, NY 10013</p>
                                    </div>
                                    <div class="app position-relative d-flex gap-3 py-2">
                                        <a href=""><i class="fa-brands fa-facebook-f"></i></a>
                                        <a href=""> <i class="fa-brands fa-instagram"></i></a>
                                        <a href=""><i class="fa-brands fa-tiktok"></i></a>
                                        <a href=""><i class="fa-brands fa-twitter"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 col-xl-2  pt-3 pt-xl-5 flex-lg-grow-1">
                            <div class="content-center">
                                <h3 class="pb-2 ps-4">Quick link</h3>
                                <ul class="list-unstyled d-flex flex-column ps-4 gap-2">
                                    <li>
                                        <a href="../index.html">Home</a>
                                    </li>
                                    <li>
                                        <a href="../pages/about-us.html">About us</a>
                                    </li>
                                    <li>
                                        <a href="../pages/feedback.html">Feedback</a>
                                    </li>

                                    <li>
                                        <a href="../pages/contact.html">Contact</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-2 col-xl-2  pt-3 pt-xl-5 flex-lg-grow-1">
                            <div class="content-center">
                                <h3 class="pb-2 ps-4">Services</h3>

                                <ul class="list-unstyled d-flex flex-column text-white ps-4 gap-2">
                                    <li>
                                        <a href="../pages/petTraining.html">Pet Training</a>
                                    </li>
                                    <li>
                                        <a href="../pages/petConsult.html">Pet Consulting</a>
                                    </li>
                                    <li>
                                        <a href="../pages/petGrooming.html">Pet Grooming</a>
                                    </li>
                                    <li>
                                        <a href="../pages/petDayCare.html">Pet Daycare</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-2 col-xl-2 pt-3 pt-xl-5 flex-lg-grow-1">
                            <div class="content-center">
                                <h3 class="pb-2 ps-4">Booking</h3>

                                <ul class="list-unstyled d-flex flex-column ps-4 gap-2">
                                    <li>
                                        <a href="../pages/booking-consult.html">Book Consulting</a>
                                    </li>
                                    <li>
                                        <a href="../pages/booking-daycare.html">Book Day care</a>
                                    </li>
                                    <li>
                                        <a href="../pages/booking-grooming.html">Book Gromming</a>
                                    </li>
                                    <li>
                                        <a href="../pages/booking.html">Book Traning</a>
                                    </li>
                                    <!-- <li>
                                        <a href="contact.html">Contact</a>
                                    </li> -->
                                </ul>

                            </div>
                        </div>
                        <div class="col-md-4 col-lg-4 col-xl-3 pt-3 pt-xl-5 flex-lg-grow-0 ps-5">
                            <div class="content-right">
                                <h3 class="pb-2">Working Hours</h3>
                                <div class="working-time">
                                    <p>Mon - Fri: 7am - 6pm
                                        Saturday: 9am - 4pm <br>
                                        Sunday: Closed</p>

                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </section>
            <section class="copyright py-3 border-top">
                <div class="container-fluid px-0">
                    <div class="d-sm-flex text-center text-sm-start justify-content-between text-white">
                        <p class="m-0 p-0">
                            <a href="" class="border-end pe-2 ">Terms of use</a>
                            <a href="" class="ps-1 ">Privacy Environmental Policy</a>
                        </p>
                        <p class="m-0 p-0 ">Copyright © 2024 by <span class="color-text">PetZone</span> <span>. All
                                Rights Reserved.</span></p>
                    </div>
                </div>
            </section>
        </div>
    </footer>


    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/petzone/profile-delete.js"></script>

    <script>


        // ============= getdata ======== 

        getData();
        function getData() {
            fetch('https://mps4.chandalen.dev/api/me', {
                method: 'GET',
                headers: {
                    "Accept": "application/json",
                    "Authorization": `Bearer ${authToken}`
                }
            })
                .then(res => res.json())
                .then(json => {
                    // Assuming the first name is in json.firstName or a similar field
                    let firstName = json.data.first_name;
                    let lname = json.data.last_name;
                    let email = json.data.email;
                    let phone = json.data.phone;
                    let address = json.data.address;
                    let avatar = json.data.avatar;
                    // console.log(firstName)
                    console.log(avatar)
                    document.querySelector('#fname').value = firstName;
                    document.querySelector('#lname').value = lname;
                    document.querySelector('#Memail').value = email;
                    document.querySelector('#pnumber').value = phone;
                    document.querySelector('#address').value = address;
                    document.querySelectorAll('.changeImg').forEach(element => {
                        element.src = avatar;
                    });
                    document.querySelectorAll('.firstname').forEach(element => {
                        element.innerHTML = firstName;
                    });
                    document.querySelectorAll('.Gemail').forEach(element=>{
                        element.innerHTML = email;
                    });
                    
                })
        }
        function update() {
            let fname = document.querySelector('#fname').value;
            let lname = document.querySelector('#lname').value;
            let number = document.querySelector('#pnumber').value;
            let address = document.querySelector('#address').value;

            console.log(fname)
            console.log(lname)

            console.log(number)
            console.log(address)


            // Create URL-encoded string
            let param = new URLSearchParams();
            param.append('first_name', fname);
            param.append('last_name', lname);
            param.append('phone', number);
            param.append('address', address);

            console.log("Encoded Params:", param.toString());

            fetch('https://mps4.chandalen.dev/api/profile/info', {
                method: 'PUT',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/x-www-form-urlencoded',
                    "Authorization": `Bearer ${authToken}`
                },
                body: param.toString()// Use the URL-encoded string as the body
            })
                .then(res => res.json())
                .then(json => {

                    alert(json.message)
                    console.log(json)
                })

        }
        document.querySelector('#btn-save').addEventListener('click', () => {
            update();
        })
      
        function changePw() {
            let oldpw = document.querySelector('#oldPw').value;
            let nPass = document.querySelector('#nPass').value;
            let cPass = document.querySelector('#cPass').value;
            console.log(oldpw)
            console.log(nPass)
            console.log(cPass)

            let param = new URLSearchParams();
            param.append('old_pass', oldpw);
            param.append('new_pass', nPass);
            param.append('new_pass_confirmation', cPass);

            console.log("Encoded Params:", param.toString());

            if (oldpw == nPass && oldpw == cPass) {
                alert('It Your old password!')
            } else {
                fetch('https://mps4.chandalen.dev/api/profile/change-pass', {
                    method: 'PUT',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/x-www-form-urlencoded',
                        "Authorization": `Bearer ${authToken}`
                    },
                    body: param.toString()
                })
                    .then(res => res.json())
                    .then(json => {
                        console.log(json)
                        if (json.result === true) {
                            console.log(json.message);
                            alert(json.message)

                            nPass.value = '';
                            cPass.value = '';

                        } else {
                            alert(json.message)
                        }
                    })

            }
        }
        document.querySelector('#btn-change').addEventListener('click', () => {
            changePw();
        })
    </script>
 <script src="../vendor/global/global.min.js"></script>
 <script src="../vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
     <!-- Preloader -->
     <script src="../vendor/global/global.min.js"></script>
     <script src="../js/custom.js"></script>
     
</body>

</html>